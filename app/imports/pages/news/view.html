<template name="news">

    <div class="row" style="margin: 25px;">
        <form>
            <div class="form-group">
                <textarea id="newRecordBody" placeholder="Предложите новость..." class="form-control" style="resize: none; padding: 10px; border-bottom-right-radius: 0;"></textarea>

                <button class="btn btn-primary btn-sm right"
                        style="border-top-right-radius: 0; border-top-left-radius: 0;"
                        data-role="AddRecord">Рассказать
                </button>

                {{#each color in colors}}
                    <button class="btn color-picker {{#if isSelectedColor color}}color-picker-active{{/if}}" style="background-color: {{color}}" data-color="{{color}}"></button>
                {{/each}}
            </div>
        </form>
    </div>

    {{#each record in news}}
        <div class="task-item" style="background-color: {{record.bg_color}}" data-item-id="{{record._id}}">
            <!-- TODO: hide remove button if user is not owner of record -->
            <a class="remove-record-btn" data-role="RemoveRecord" data-target="{{record._id}}" aria-label="Left Align">
                <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
            </a>
            <div class="task-description">{{{record.message}}}</div>
            <div class="task-deadline">
                <div class="task-deadline-label">{{record.watched_count_label}}</div>
                <div class="task-deadline-date"></div>
            </div>
            <div class="task-author">
                <div class="task-author-photo"></div>
                <div class="task-author-name">{{record.created_date}}<br>{{record.creator_name}}</div>
                <div style="clear: both"></div>
            </div>
            <div style="clear: both"></div>
        </div>
        {{#each comment in record.comments}}
            <div class="task-commentaries">
                <div class="task-comment-message">
                    {{{comment.message}}}
                </div>
                <div class="task-author">
                    <div class="task-author-photo"></div>
                    <div class="task-author-name">{{comment.created_date}}<br>{{comment.creator_name}}</div>
                    <div style="clear: both"></div>
                </div>
                <div style="clear: both"></div>
            </div>
        {{/each}}
        {{#if isSelectedItem record._id }}
            <div class="task-new-comment">
                <textarea id="newCommentBody" placeholder="Ваш комментарий" class="form-control" style="resize: none;border-bottom-right-radius: 0;"></textarea>
                <button class="btn btn-sm right"
                        style="border-top-right-radius: 0; border-top-left-radius: 0;"
                        data-role="AddComment"
                        data-target="{{record._id}}">Комментировать
                </button>
                <div style="clear: both"></div>
            </div>
        {{/if}}
    {{/each}}

</template>